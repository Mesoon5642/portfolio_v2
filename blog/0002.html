<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/443896d591e4f761-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/blog/0002/wrapper.png"/><link rel="preload" as="image" href="/blog/0002/matrixstream.png"/><link rel="stylesheet" href="/_next/static/css/c0c1ca8fde2ec214.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-51657c1f2f9a1cee.js"/><script src="/_next/static/chunks/4bd1b696-d4d5eb693d0a7af9.js" async=""></script><script src="/_next/static/chunks/684-e48fc9c0ac8de16d.js" async=""></script><script src="/_next/static/chunks/main-app-0c67a9c0eb4e4b37.js" async=""></script><script src="/_next/static/chunks/63-3582bf972f2ea57d.js" async=""></script><script src="/_next/static/chunks/app/layout-706acde1e204b24b.js" async=""></script><script src="/_next/static/chunks/app/page-f75647841e78239f.js" async=""></script><meta name="next-size-adjust" content=""/><title>Mason&#x27;s Portfolio</title><meta name="description" content="Mason&#x27;s Portfolio Website"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_a06722 antialiased"><div><div class="fixed -z-10"></div><div class="z-10 w-[100%]"><div class="absolute min-h-screen h-auto bg-black absolute text-teal-200 p-5 border-x-2 border-violet-600 w-[90%] md:w-[75%] lg:w-[50%] mx-[5%] md:mx-[12.5%] lg:mx-[25%] content-container"><div class="flex justify-center items-center"><img alt="wordart" loading="lazy" width="3654" height="2126" decoding="async" data-nimg="1" class="object-contain" style="color:transparent;width:50%;height:auto;min-height:10rem;min-width:10rem" src="/_next/static/media/wordart.22ac6576.png"/></div><div class="text-xl text-pink-400 mb-10 underline underline-offset-4 flex items-center flex-col lg:flex-row justify-around w-[100%]"><a class="mb-3 lg:mb-0" href="/">Home</a><a class="mb-3 lg:mb-0" href="/portfolio">Resume &amp; Portfolio</a><a class="mb-3 lg:mb-0" href="/blog">Blog</a></div><div class="mt-20 mb-5 mx-5 text-wrap text-center"><h2 class="m-0 text-emerald-500 text-lg text-center md:text-xl font-bold">6/6/2025</h2>
<h1 class="m-0 mb-5 text-lg text-center md:text-xl font-bold">Falling Text: Building a (somewhat) performant Matrix Rain effect</h1>
<hr class="mb-10 my-5"/>
<p><a class="text-pink-400 underline underline-offset-4" target="_blank" href="https://www.youtube.com/watch?v=zE7PKRjrid4">Do you want to know, what it is?</a> What drove me to make this silly effect?</p>
<p> </p>
<p>It&#x27;s nothing grand really. Just thought it would be cool and fit the website! (&quot;rule of cool&quot; is back with a vengeance). I&#x27;ve loved the Matrix movies for a while now, and thought that it was a good balance of cool, corny, and fitting to the whole 90&#x27;s aesthetic.</p>
<p> </p>
<p>Despite other methods that could render it faster and with a bit more flair, I decided to give myself a couple of fun constraints:</p>
<ol style="border-style:ridge" class="my-5 p-5 border-2 border-violet-600 marker:text-emerald-500 list-decimal list-inside">
<li class="my-2">Everything must be rendered in real-time. No pre-rendered gifs</li>
<li class="my-2">The falling text is unique from each page load and visit</li>
<li class="my-2">Build everything with raw Tailwind and React. WebGL is off limits</li>
<li class="my-2">Avoid using html &lt;canvas&gt;.</li>
</ol>
<p>So, I started with the boring stuff: prepping the DOM to load the Matrix.</p>
<p> </p>
<h1 class="m-0 mb-5 text-lg text-center md:text-xl font-bold">Section 1: Enter the Matrix</h1>
<p>As I write more of this blog, I hope that it comes across how anal I am about making my websites work cross platform. This effect is no exception.</p>
<p> </p>
<p>To setup the DOM to render the Matrix effect, a function is ran whenever a screen width update event is fired (either on DOM load or by changing window size). This function splits the width of the screen into 16px intervals, and appends the positions of each interval to a state array. This ensures that when switching back and forth between screen sizes, the correct amount of falling text columns (&quot;Matrix Streams&quot; as I&#x27;ll call them henceforth) are rendered!
<div class="flex items-center justify-center"><img style="border-style:ridge" class="my-5 w-[100%] lg:w-[80%] border-2 lg:border-20 border-violet-600 object-contain" src="/blog/0002/wrapper.png" alt="a screenshot of the matrix wrapper code; it&#x27;s not a lot!"/></div></p>
<h4 class="text-base text-emerald-500">Caption: The HTML of the Matrix Text wrapper element. Not much here!</h4>
<p> </p>
<p>What made React great for this is that I could break each text stream into its own component, and handle its own state independent from the rest of the Matrix effect. While I thought about breaking each character down into it&#x27;s own element to make the effect more &quot;movie accurate&quot;, I reasoned it would be too much of a performance hit on an already expensive effect.</p>
<p> </p>
<h1 class="m-0 mb-5 text-lg text-center md:text-xl font-bold">Section 2: Prime Text Soup</h1>
<p>Now, I went on to where the magic happens: the MatrixStream component. From the last step, there exists an array of positions mapped to MatrixStream elements, which is used to position each stream of text across the screen. These streams exist in two states: &quot;alive&quot; and &quot;dead&quot;. Initially, all streams are marked as dead, which informs each MatrixStream component to begin its own rendering process. A timeout is set in a bounded random range for each stream to wait out before rendering text to the screen.</p>
<p> </p>
<p>Once the initial timeout has passed for a particular stream, the text-rendering function is called. This function runs a loop that picks a random unicode character out of a range, appends it and a newline to a &lt;p&gt; element that contains the stream text, and then waits 25ms before repeating the process. This loop continues to run until the &lt;p&gt; element&#x27;s height is greater than or equal to the height of the window. Note that the height of the paragraph is increasing with each character of text and newline that is added.</p>
<p> </p>
<p>After the loop is complete, the stream is not marked dead immediately. Rather, a 2s &quot;fade-out&quot; animation is played, and afterwards the stream is marked dead again. This was my compromise to make something look &quot;Matrix-like&quot; while still being somewhat performant. Rather than render individual states of animation/coloring for each character of text, one animation is ran per column, saving rendering resources.
<div class="flex items-center justify-center"><img style="border-style:ridge" class="my-5 w-[100%] lg:w-[80%] border-2 lg:border-20 border-violet-600 object-contain" src="/blog/0002/matrixstream.png" alt="a screenshot of the matrix stream code; just some state management."/></div></p>
<h4 class="text-base text-emerald-500">Caption: The function and the hook behind maintaining the state of each stream.</h4>
<p> </p>
<p>Finally, once a stream is marked dead again, a useEffect hook fires on the state change and goes through the same actions as when the stream was initially marked dead: clear all text in the stream, remove all animation classes, and start a bounded random countdown to run the whole function again. Violia, a column of Matrix text!</p>
<p> </p>
<h1 class="m-0 mb-5 text-lg text-center md:text-xl font-bold">Section 3: Welcome to the Real World (of React)</h1>
<p>While I very much love how this effect turned out and its relative simplicity, it is far from flawless. Two primary issues arise:</p>
<ol style="border-style:ridge" class="my-5 p-5 border-2 border-violet-600 marker:text-emerald-500 list-decimal list-inside">
<li class="my-2">On first page load, a lot of the Matrix text will fire simultaneously.</li>
<li class="my-2">Lots of DOM updates lead to a minor performance hit</li>
</ol>
<p>Regarding the first issue, this is due to every single stream being marked &quot;dead&quot; at once on page load. Despite leaving an initial wait time for each Matrix stream to begin rendering, the ranges are not de-synced enough yet to prevent this from happening. After a couple of render cycles, each stream of the Matrix will start to diverge more and more from the rest, but some more first render calculation is needed to prevent clustering on initial load.</p>
<p> </p>
<p>As for the second: a HTML &lt;canvas&gt; element would lead to increased performance due to being optimized for frequent re-draws. In a future version of this effect, I may very well try to rebuild it using &lt;canvas&gt; elements, but using &lt;p&gt; elements proved to be a fun challenge and an interesting proof of concept. Coloring and animations could start to get quite flashy using &lt;canvas&gt;, and I&#x27;m curious to see how I could add more to the effect in the future!</p>
<p> </p>
<p>While there are other smaller issues (and likely blindspots I haven&#x27;t caught yet) present, I think that building this text stream effect has been a blast overall. I&#x27;m quite pleased with the final result, and I think that it adds some unique visual flair to a website already exploding with color and styling! It&#x27;s been a fun excersize in using React and Tailwind&#x27;s strengths to go beyond basic DOM construction for sure.</p>
<p> </p>
<p>With that, I&#x27;ll end my analysis here. Thanks for tumbling down this rabbit hole with me, and stay rad!</p></div><!--$--><!--/$--><!--$--><!--/$--><div class="mt-20 text-violet-600 text-center text-xs"><p class="mb-1">Copyright © 2025 Mason Shields</p><p>You are free to use any code on this website, but ask if you want to use content!</p></div></div></div></div><script src="/_next/static/chunks/webpack-51657c1f2f9a1cee.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[7232,[\"63\",\"static/chunks/63-3582bf972f2ea57d.js\",\"177\",\"static/chunks/app/layout-706acde1e204b24b.js\"],\"default\"]\n3:I[3063,[\"63\",\"static/chunks/63-3582bf972f2ea57d.js\",\"974\",\"static/chunks/app/page-f75647841e78239f.js\"],\"Image\"]\n4:I[7555,[],\"\"]\n5:I[1295,[],\"\"]\n7:I[9665,[],\"MetadataBoundary\"]\n9:I[9665,[],\"OutletBoundary\"]\nc:I[4911,[],\"AsyncMetadataOutlet\"]\ne:I[9665,[],\"ViewportBoundary\"]\n10:I[6614,[],\"\"]\n:HL[\"/_next/static/media/443896d591e4f761-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/c0c1ca8fde2ec214.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"UDzxKTFGPLzvYS1PCCTX-\",\"p\":\"\",\"c\":[\"\",\"blog\",\"0002\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"0002\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c0c1ca8fde2ec214.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_a06722 antialiased\",\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"z-10 w-[100%]\",\"children\":[\"$\",\"div\",null,{\"className\":\"absolute min-h-screen h-auto bg-black absolute text-teal-200 p-5 border-x-2 border-violet-600 w-[90%] md:w-[75%] lg:w-[50%] mx-[5%] md:mx-[12.5%] lg:mx-[25%] content-container\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex justify-center items-center\",\"children\":[\"$\",\"$L3\",null,{\"src\":{\"src\":\"/_next/static/media/wordart.22ac6576.png\",\"height\":2126,\"width\":3654,\"blurDataURL\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAJFBMVEW2V+ePQNCFRdOCOs5fNs2qXtmeStKYRNB2NcmOQdFrNMd/Msgf/m3LAAAADHRSTlMB5TjRHA1lpJHVU+RlHHdtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAKUlEQVR4nCXKyREAIAjAwHCD9t+vM5jvBjZ1wE9fUdpspDKQSl2NP/EACjkAahy8x58AAAAASUVORK5CYII=\",\"blurWidth\":8,\"blurHeight\":5},\"alt\":\"wordart\",\"style\":{\"width\":\"50%\",\"height\":\"auto\",\"minHeight\":\"10rem\",\"minWidth\":\"10rem\"},\"className\":\"object-contain\"}]}],[\"$\",\"div\",null,{\"className\":\"text-xl text-pink-400 mb-10 underline underline-offset-4 flex items-center flex-col lg:flex-row justify-around w-[100%]\",\"children\":[[\"$\",\"a\",null,{\"className\":\"mb-3 lg:mb-0\",\"href\":\"/\",\"children\":\"Home\"}],[\"$\",\"a\",null,{\"className\":\"mb-3 lg:mb-0\",\"href\":\"/portfolio\",\"children\":\"Resume \u0026 Portfolio\"}],[\"$\",\"a\",null,{\"className\":\"mb-3 lg:mb-0\",\"href\":\"/blog\",\"children\":\"Blog\"}]]}],[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"div\",null,{\"className\":\"mt-20 text-violet-600 text-center text-xs\",\"children\":[[\"$\",\"p\",null,{\"className\":\"mb-1\",\"children\":\"Copyright © 2025 Mason Shields\"}],[\"$\",\"p\",null,{\"children\":\"You are free to use any code on this website, but ask if you want to use content!\"}]]}]]}]}]}]}]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"0002\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",[\"$\",\"$L7\",null,{\"children\":\"$L8\"}],null,[\"$\",\"$L9\",null,{\"children\":[\"$La\",\"$Lb\",[\"$\",\"$Lc\",null,{\"promise\":\"$@d\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"JYs_a7BdjlpKtbz6Q9cfY\",{\"children\":[[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"11:\"$Sreact.suspense\"\n12:I[4911,[],\"AsyncMetadata\"]\n8:[\"$\",\"$11\",null,{\"fallback\":null,\"children\":[\"$\",\"$L12\",null,{\"promise\":\"$@13\"}]}]\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"mt-20 mb-5 mx-5 text-wrap text-center\",\"children\":[[\"$\",\"h2\",\"h2-0\",{\"className\":\"m-0 text-emerald-500 text-lg text-center md:text-xl font-bold\",\"children\":\"6/6/2025\"}],\"\\n\",[\"$\",\"h1\",\"h1-0\",{\"className\":\"m-0 mb-5 text-lg text-center md:text-xl font-bold\",\"children\":\"Falling Text: Building a (somewhat) performant Matrix Rain effect\"}],\"\\n\",[\"$\",\"hr\",\"hr-0\",{\"className\":\"mb-10 my-5\"}],\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":[[\"$\",\"a\",\"a-0\",{\"className\":\"text-pink-400 underline underline-offset-4\",\"target\":\"_blank\",\"href\":\"https://www.youtube.com/watch?v=zE7PKRjrid4\",\"children\":\"Do you want to know, what it is?\"}],\" What drove me to make this silly effect?\"]}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\" \"}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"It's nothing grand really. Just thought it would be cool and fit the website! (\\\"rule of cool\\\" is back with a vengeance). I've loved the Matrix movies for a while now, and thought that it was a good balance of cool, corny, and fitting to the whole 90's aesthetic.\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\" \"}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":\"Despite other methods that could render it faster and with a bit more flair, I decided to give myself a couple of fun constraints:\"}],\"\\n\",[\"$\",\"ol\",\"ol-0\",{\"style\":{\"borderStyle\":\"ridge\"},\"className\":\"my-5 p-5 border-2 border-violet-600 marker:text-emerald-500 list-decimal list-inside\",\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"className\":\"my-2\",\"children\":\"Everything must be rendered in real-time. No pre-rendered gifs\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"className\":\"my-2\",\"children\":\"The falling text is unique from each page load and visit\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"className\":\"my-2\",\"children\":\"Build everything with raw Tailwind and React. WebGL is off limits\"}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"className\":\"my-2\",\"children\":\"Avoid using html \u003ccanvas\u003e.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-5\",{\"children\":\"So, I started with the boring stuff: prepping the DOM to load the Matrix.\"}],\"\\n\",[\"$\",\"p\",\"p-6\",{\"children\":\" \"}],\"\\n\",[\"$\",\"h1\",\"h1-1\",{\"className\":\"m-0 mb-5 text-lg text-center md:text-xl font-bold\",\"children\":\"Section 1: Enter the Matrix\"}],\"\\n\",[\"$\",\"p\",\"p-7\",{\"children\":\"As I write more of this blog, I hope that it comes across how anal I am about making my websites work cross platform. This effect is no exception.\"}],\"\\n\",[\"$\",\"p\",\"p-8\",{\"children\":\" \"}],\"\\n\",[\"$\",\"p\",\"p-9\",{\"children\":[\"To setup the DOM to render the Matrix effect, a function is ran whenever a screen width update event is fired (either on DOM load or by changing window size). This function splits the width of the screen into 16px intervals, and appends the positions of each interval to a state array. This ensures that when switching back and forth between screen sizes, the correct amount of falling text columns (\\\"Matrix Streams\\\" as I'll call them henceforth) are rendered!\\n\",[\"$\",\"div\",\"img-0\",{\"className\":\"flex items-center justify-center\",\"children\":[\"$\",\"img\",null,{\"style\":{\"borderStyle\":\"ridge\"},\"className\":\"my-5 w-[100%] lg:w-[80%] border-2 lg:border-20 border-violet-600 object-contain\",\"src\":\"/blog/0002/wrapper.png\",\"alt\":\"a screenshot of the matrix wrapper code; it's not a lot!\"}]}]]}],\"\\n\",[\"$\",\"h4\",\"h4-0\",{\"className\":\"text-base text-emerald-500\",\"children\":\"Caption: The HTML of the Matrix Text wrapper element. Not much here!\"}],\"\\n\",[\"$\",\"p\",\"p-10\",{\"children\":\" \"}],\"\\n\",[\"$\",\"p\",\"p-11\",{\"children\":\"What made React great for this is that I could break each text stream into its own component, and handle its own state independent from the rest of the Matrix effect. While I thought about breaking each character down into it's own element to make the effect more \\\"movie accurate\\\", I reasoned it would be too much of a performance hit on an already expensive effect.\"}],\"\\n\",[\"$\",\"p\",\"p-12\",{\"children\":\" \"}],\"\\n\",[\"$\",\"h1\",\"h1-2\",{\"className\":\"m-0 mb-5 text-lg text-center md:text-xl font-bold\",\"children\":\"Section 2: Prime Text Soup\"}],\"\\n\",[\"$\",\"p\",\"p-13\",{\"children\":\"Now, I went on to where the magic happens: the MatrixStream component. From the last step, there exists an array of positions mapped to MatrixStream elements, which is used to position each stream of text across the screen. These streams exist in two states: \\\"alive\\\" and \\\"dead\\\". Initially, all streams are marked as dead, which informs each MatrixStream component to begin its own rendering process. A timeout is set in a bounded random range for each stream to wait out before rendering text to the screen.\"}],\"\\n\",[\"$\",\"p\",\"p-14\",{\"children\":\" \"}],\"\\n\",[\"$\",\"p\",\"p-15\",{\"children\":\"Once the initial timeout has passed for a particular stream, the text-rendering function is called. This function runs a loop that picks a random unicode character out of a range, appends it and a newline to a \u003cp\u003e element that contains the stream text, and then waits 25ms before repeating the process. This loop continues to run until the \u003cp\u003e element's height is greater than or equal to the height of the window. Note that the height of the paragraph is increasing with each character of text and newline that is added.\"}],\"\\n\",[\"$\",\"p\",\"p-16\",{\"children\":\" \"}],\"\\n\",[\"$\",\"p\",\"p-17\",{\"children\":[\"After the loop is complete, the stream is not marked dead immediately. Rather, a 2s \\\"fade-out\\\" animation is played, and afterwards the stream is marked dead again. This was my compromise to make something look \\\"Matrix-like\\\" while still being somewhat performant. Rather than render individual states of animation/coloring for each character of text, one animation is ran per column, saving rendering resources.\\n\",[\"$\",\"div\",\"img-0\",{\"className\":\"flex items-center justify-center\",\"children\":[\"$\",\"img\",null,{\"style\":{\"borderStyle\":\"ridge\"},\"className\":\"my-5 w-[100%] lg:w-[80%] border-2 lg:border-20 border-violet-600 object-contain\",\"src\":\"/blog/0002/matrixstream.png\",\"alt\":\"a screenshot of the matrix stream code; just some state management.\"}]}]]}],\"\\n\",[\"$\",\"h4\",\"h4-1\",{\"className\":\"text-base text-emerald-500\",\"children\":\"Caption: The function and the hook behind maintaining the state of each stream.\"}],\"\\n\",[\"$\",\"p\",\"p-18\",{\"children\":\" \"}],\"\\n\",[\"$\",\"p\",\"p-19\",{\"children\":\"Finally, once a stream is marked dead again, a useEffect hook fires on the state change and goes through the same actions as when the stream was initially marked dead: clear all text in the stream, remove all animation classes, and start a bounded random countdown to run the whole function again. Violia, a column of Matrix text!\"}],\"\\n\",[\"$\",\"p\",\"p-20\",{\"children\":\" \"}],\"\\n\",[\"$\",\"h1\",\"h1-3\",{\"className\":\"m-0 mb-5 text-lg text-center md:text-xl font-bold\",\"children\":\"Section 3: Welcome to the Real World (of React)\"}],\"\\n\",[\"$\",\"p\",\"p-21\",{\"children\":\"While I very much love how this effect turned out and its relative simplicity, it is far from flawless. Two primary issues arise:\"}],\"\\n\",[\"$\",\"ol\",\"ol-1\",{\"style\":{\"borderStyle\":\"ridge\"},\"className\":\"my-5 p-5 border-2 border-violet-600 marker:text-emerald-500 list-decimal list-inside\",\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"className\":\"my-2\",\"children\":\"On first page load, a lot of the Matrix text will fire simultaneously.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"className\":\"my-2\",\"children\":\"Lots of DOM updates lead to a minor performance hit\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-22\",{\"children\":\"Regarding the first issue, this is due to every single stream being marked \\\"dead\\\" at once on page load. Despite leaving an initial wait time for each Matrix stream to begin rendering, the ranges are not de-synced enough yet to prevent this from happening. After a couple of render cycles, each stream of the Matrix will start to diverge more and more from the rest, but some more first render calculation is needed to prevent clustering on initial load.\"}],\"\\n\",[\"$\",\"p\",\"p-23\",{\"children\":\" \"}],\"\\n\",[\"$\",\"p\",\"p-24\",{\"children\":\"As for the second: a HTML \u003ccanvas\u003e element would lead to increased performance due to being optimized for frequent re-draws. In a future version of this effect, I may very well try to rebuild it using \u003ccanvas\u003e elements, but using \u003cp\u003e elements proved to be a fun challenge and an interesting proof of concept. Coloring and animations could start to get quite flashy using \u003ccanvas\u003e, and I'm curious to see how I could add more to the effect in the future!\"}],\"\\n\",[\"$\",\"p\",\"p-25\",{\"children\":\" \"}],\"\\n\",[\"$\",\"p\",\"p-26\",{\"children\":\"While there are other smaller issues (and likely blindspots I haven't caught yet) present, I think that building this text stream effect has been a blast overall. I'm quite pleased with the final result, and I think that it adds some unique visual flair to a website already exploding with color and styling! It's been a fun excersize in using React and Tailwind's strengths to go beyond basic DOM construction for sure.\"}],\"\\n\",[\"$\",\"p\",\"p-27\",{\"children\":\" \"}],\"\\n\",[\"$\",\"p\",\"p-28\",{\"children\":\"With that, I'll end my analysis here. Thanks for tumbling down this rabbit hole with me, and stay rad!\"}]]}]\n"])</script><script>self.__next_f.push([1,"b:null\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\na:null\n"])</script><script>self.__next_f.push([1,"13:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Mason's Portfolio\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Mason's Portfolio Website\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]],\"error\":null,\"digest\":\"$undefined\"}\nd:{\"metadata\":\"$13:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>